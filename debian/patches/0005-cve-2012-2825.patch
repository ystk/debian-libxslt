From: Chris Evans <cevans@chromium.org>
Date: Thu, 5 Jul 2012 11:08:31 +0800
Subject: Fix crash with unexpected DTD nodes in XSLT.

A fix for XSLT node checking.
---
 libxslt/xsltutils.h |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/libxslt/xsltutils.h b/libxslt/xsltutils.h
index 3886be3..c986a9c 100644
--- a/libxslt/xsltutils.h
+++ b/libxslt/xsltutils.h
@@ -52,8 +52,8 @@ extern "C" {
  * Checks that the element pertains to XSLT namespace.
  */
 #define IS_XSLT_ELEM(n)							\
-    (((n) != NULL) && ((n)->ns != NULL) &&				\
-     (xmlStrEqual((n)->ns->href, XSLT_NAMESPACE)))
+    (((n) != NULL) && ((n)->type == XML_ELEMENT_NODE) &&                \
+     ((n)->ns != NULL) && (xmlStrEqual((n)->ns->href, XSLT_NAMESPACE)))
 
 /**
  * IS_XSLT_NAME:
-- 
